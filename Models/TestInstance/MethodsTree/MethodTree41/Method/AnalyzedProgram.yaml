InternalClassType: Comment
Cont: |+1
 
 /
 param part: object
 var RSU := self.~
 var rsuUnit   := self.~._3D.getObject(1)
 var LiftTable := rsuUnit.getObject(1)
 var Forks     := LiftTable.getObject(1)
 var destination := part.destination
 var isDestinationStore := destination.~.InternalClassName = "NW_Store"
 var target:any
 
 if isDestinationStore
 	RSU.state:="loading"
 	var x, y:integer
 
 	destination.getStoragePlace(x,y)
 	target := RSU._3D.getPositionOfObject(destination.~, destination.~._3D.getMUAnimationPosition(x,y))
 else
 	RSU.state:="unloading"
 	target := RSU._3D.getPositionOfObject(destination, destination._3D.getMUAnimationPosition(part.MUWidth/2))
 end
 
 
 var partPosition := RSU._3D.getPositionOfObject(part)
 RSU.waitPosReached(max(rsuUnit.moveTo(partPosition.x), LiftTable.moveTo(partPosition.z)))
 RSU.waitPosReached(Forks.moveTo(partPosition.y))
 
 var partLocation := part.~
 var partLocationClass := partLocation.InternalClassName
 
 if partLocationClass="NW_Store"
 	part.getStoragePlace(x,y)
 	if part.~ = RackLeft
 		OccupancyLeft[x, y] := 0
 	else
 		OccupancyRight[x, y] := 0
 	end
 	part.move(RSU)
 
 	WMS.NumFreePlaces += 1
 	RSU.waitPosReached(Forks.moveTo(0))
 elseif  partLocationClass="Line"
 	partLocation.stopped:=True
 	part.move(RSU)
 	RSU.waitPosReached(Forks.moveTo(0))
 	partLocation.stopped:=False
 end
 
 
 RSU.waitPosReached(max(rsuUnit.moveTo(target.x), LiftTable.moveTo(target.z)))
 
 if isDestinationStore
 	RSU.waitPosReached(Forks.moveTo(target.y))
 	part.move(destination)
 else
 	waituntil destination.loadable
 	RSU.waitPosReached(Forks.moveTo(target.y))
 	part.ConveyingDirection += 2
 	part.insert(destination, part.MUWidth)
 	destination.loadable := false
 end
 
 
 
 part.destination:=void
 
 
 RSU.state := "DrivingHome"
 
 RSU.waitPosReached(Forks.moveTo(RSU.HomePositionY))
 RSU.waitPosReached(max(rsuUnit.moveTo(RSU.HomePositionX), LiftTable.moveTo(RSU.HomePositionZ)))
 
 RSU.state := "Waiting"
Origin: c5ce3683-2ad7-434d-a125-e9ab898a8a5e
SaveAsRichedit: false
UUID: 91bf486a-d242-4d57-b821-17318a25ed67
